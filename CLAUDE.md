# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is the Ark Studios corporate website (https://arkstudios.co.jp), built with Next.js 15 using static site generation (SSG). The site is deployed to GitHub Pages and supports Japanese (default) and English locales.

## Development Commands

```bash
# Start development server
npm run dev

# Build static site (output to ./out/)
npm run build

# Run production server (after build)
npm start

# Lint code
npm run lint

# Format code with Prettier
npm run format
```

## Architecture

### Internationalization (i18n)

The site uses a custom i18n implementation with dynamic routing:

- **Supported languages**: Japanese (`ja`, default) and English (`en`)
- **Language route**: All pages are under `src/app/[language]/` dynamic route
- **Configuration**: `src/app/i18n/i18n-config.ts` defines supported languages
- **Dictionary files**: JSON translation files at `src/app/i18n/dictionaries/{lang}.json`
- **Dictionary loader**: `src/app/i18n/get-dictionary.ts` provides `getDictionary(language)` function

When creating new pages or components that display text:
1. Add translations to both `ja.json` and `en.json`
2. Use `getDictionary(language)` to load translations server-side
3. Pass language prop down from page params: `params: Promise<{ language: Language }>`

### Routing Structure

```
src/app/
├── [language]/              # All routes are language-scoped
│   ├── (overview)/          # Route group (doesn't affect URL)
│   │   └── page.tsx         # Home page: /{lang}
│   ├── products/
│   │   ├── page.tsx         # Products page: /{lang}/products
│   │   └── data.ts          # Product data definitions
│   ├── company/
│   │   ├── page.tsx         # Company page: /{lang}/company
│   │   └── data.ts
│   ├── privacy/bitremote/   # Privacy policy for BitRemote
│   ├── eula/bitremote/      # EULA for BitRemote
│   └── layout.tsx           # Root layout with metadata generation
├── ui/components/           # Shared components (NavigationBar, Footer)
├── i18n/                    # i18n system
└── globals.css              # Global styles
```

Route groups like `(overview)` organize code without affecting URLs.

### Data Pattern

Pages with dynamic content follow this pattern:
- `page.tsx`: React Server Component that renders the page
- `data.ts`: Exports data fetching functions (e.g., `getAppInfos()`) and TypeScript types

Example from `products/data.ts`:
```typescript
export async function getAppInfos({ language }: { language: Language }): Promise<AppInfo[]> {
  const d = (await getDictionary(language)).Products
  // Returns array of app info with localized strings
}
```

### Static Site Generation

- **Next.js config**: `output: 'export'` enables static export
- **Images**: `unoptimized: true` because GitHub Pages doesn't support Next.js image optimization
- **Deployment**: GitHub Actions workflow builds and deploys to GitHub Pages on push to `main`
- **Output directory**: `./out/` (generated by `next build`)

### Styling

- **Framework**: Tailwind CSS v4
- **Global styles**: `src/app/globals.css`
- **Icons**: Font Awesome (via `@fortawesome/react-fontawesome`)
- **Dark mode**: Uses `dark:` variants throughout, theme color set in viewport config

### TypeScript Configuration

- **Path alias**: `@/*` maps to `src/*` for imports
- **Strict mode**: Enabled
- **Module resolution**: `bundler` (for Next.js 13+ App Router)

## Code Standards

### ESLint Configuration

Enforces strict import ordering:
1. Built-in Node modules
2. External packages
3. Internal modules (in order):
   - `@/utils/**`
   - `@/libs/**`
   - `@/hooks/**`
   - `@/components/**`
   - `@/const/**`
   - `@/types/**`
4. Parent/sibling imports
5. Type imports
6. Index imports

Imports within each group are alphabetized. Blank lines required between groups.

### Prettier Configuration

- Semi: false
- Single quotes: true (JSX too)
- Print width: 90
- Trailing commas: all
- Tailwind CSS class sorting enabled

## Important Notes

- All pages must be Server Components (default in App Router)
- Use `generateStaticParams()` in dynamic routes to pre-render all language variants
- Images should use `<picture>` with WebP and fallback formats for optimization
- The site is read-only after build (no server-side rendering or API routes)
